<!-- sourced from https://raw.githubusercontent.com/reactjs/reactjs.org/master/static/html/single-file-example.html -->
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Trailblazers Reviews</title>
</head>

<body>
  <div id="reviews"></div>
  <noscript>
    You need to enable JavaScript to run this app.
  </noscript>
  <script>
  let INITIAL_STATE = null;
  fetch(`http://fec-reviews-dev.us-west-2.elasticbeanstalk.com/reviews/${window.location.href.split('/')[window.location.href.split('/').length - 1]}`)
    .then(response => response.json())
    .then(json => {
      const ratings = json.reduce((currentRatings, review) => {
        const newRatings = currentRatings;
        newRatings[review.rating - 1]++;
        return newRatings;
      }, Array(5).fill(0));
      const sortedReviews = json.sort(
        (a, b) => new Date(b.posting_date) - new Date(a.posting_date),
      );
      INITIAL_STATE = { reviews: sortedReviews, ratings };
    });
  </script>
  <script src="https://s3.amazonaws.com/fectrailblazers/reviews.js"></script>
</body>

</html>
